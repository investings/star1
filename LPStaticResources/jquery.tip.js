(function(h){h.fn.tip=function(b){var a=h.extend({},h.fn.tip.defaults,b);if(a.onHover){if(a.stickIfCurrent){this.filter("."+a.currentClass).each(function(c){h(this).createTip(a)})}if(a.reverseHover){h(this).createTip(a);this.hover(function(){if(!a.stickIfCurrent||!h(this).hasClass(a.currentClass)){h(this).hideTip()}},function(){h(this).showTip(a)})}else{this.hover(function(){h(this).showTip(a)},function(){if(!a.stickIfCurrent||!h(this).hasClass(a.currentClass)){h(this).hideTip()}})}}else{this.createTip(a)}return this};h.fn.tip.defaults={content:false,onHover:true,reverseHover:false,stickIfCurrent:false,currentClass:"current",offset:4,position:"top",animationOffset:4,delay:0};h.fn.showTip=function(b){var a=h.extend({},h.fn.tip.defaults,b);this.each(function(i){var m=h(this);var c=(h.browser.msie&&h.browser.version<9);var d=m.data("tip");if(!d){m.createTip(a,c?false:true);d=m.data("tip")}else{if(a.content!==m.data("settings").content){m.updateTipContent(b.content)}}if(!c){var n=f(m,d,a,false);d.stop(true).animate({opacity:1,top:n.top,left:n.left},"fast")}});return this};h.fn.hideTip=function(){this.each(function(d){var i=h(this);var b=i.data("tip");if(b){var c=i.data("settings");if(h.browser.msie&&h.browser.version<9){b.children(".arrow").remove();this.title=b.html();i.data("tip",false);b.remove()}else{var l=e(b,c);var a=b.offset();switch(l){case"right":a.left+=c.animationOffset+c.offset;break;case"bottom":a.top+=c.animationOffset+c.offset;break;case"left":a.left-=c.animationOffset+c.offset;break;default:a.top-=c.animationOffset+c.offset;break}b.remove()}}});return this};h.fn.createTip=function(a,b){this.each(function(d){var i=h(this);var l=g();l.append("<div></div>");var c=l.children(":last-child");if(a.position=="right"||i.hasClass("tip-right")||i.parent().hasClass("children-tip-right")){c.addClass("tip-right")}else{if(a.position=="bottom"||i.hasClass("tip-bottom")||i.parent().hasClass("children-tip-bottom")){c.addClass("tip-bottom")}else{if(a.position=="left"||i.hasClass("tip-left")||i.parent().hasClass("children-tip-left")){c.addClass("tip-left")}}}c.data("node",i);i.data("tip",c);i.data("settings",a);i.updateTipContent(a.content,b);if(b){c.css({opacity:0})}});return this};h.fn.updateTipContent=function(a,b){this.each(function(o){var p=h(this);var d=p.data("tip");var i=p.data("settings");if(!a){if(this.title&&this.title.length>0){var c=this.title;this.title=""}else{var r=p.find("[title]:first");if(r.length>0){var c=r.attr("title");r.attr("title","")}else{var c=p.text()}}}else{var c=a}if(!c||h.trim(c).length==0){c="<em>No tip</em>"}d.html(c+'<span class="arrow"><span></span></span>');d.stop(true,true);var q=f(p,d,i,b);d.offset(q)});return this};h.fn.refreshTip=function(){this.each(function(b){var a=h(this).data("settings");if(a&&a.stickIfCurrent){var c=h(this);if(c.hasClass(a.currentClass)){c.showTip(a)}else{c.hideTip(a)}}});return this};function e(a,b){var c=b.position;if(a.hasClass("tip-right")){c="right"}else{if(a.hasClass("tip-bottom")){c="bottom"}else{if(a.hasClass("tip-left")){c="left"}}}return c}function f(k,c,d,a){var b=k.offset();var l=e(c,d);switch(l){case"right":return{top:Math.round(b.top+(k.outerHeight()/2)-(c.outerHeight()/2)),left:Math.round(b.left+k.outerWidth()+(a?d.animationOffset+d.offset:d.offset))};break;case"bottom":return{top:Math.round(b.top+k.outerHeight()+(a?d.animationOffset+d.offset:d.offset)),left:Math.round(b.left+(k.outerWidth()/2)-(c.outerWidth()/2))};break;case"left":return{top:Math.round(b.top+(k.outerHeight()/2)-(c.outerHeight()/2)),left:Math.round(b.left-c.outerWidth()-(a?d.animationOffset+d.offset:d.offset))};break;default:return{top:Math.round(b.top-c.outerHeight()-(a?d.animationOffset+d.offset:d.offset)),left:Math.round(b.left+(k.outerWidth()/2)-(c.outerWidth()/2))};break}}if(h.fn.addTemplateSetup){h.fn.addTemplateSetup(function(){this.find(".with-tip, .with-children-tip > *").tip()})}else{h(document).ready(function(){h(".with-tip, .with-children-tip > *").tip()})}function g(){var a=h("#tips");if(a.length==0){h(document.body).append('<div id="tips"></div>');a=h("#tips")}return a}h(window).resize(function(){g().children().each(function(c){var a=h(this);var d=a.data("node");var b=d.data("settings");var m=b.stickIfCurrent&&d.hasClass(b.currentClass);var i=(b.onHover&&!m);a.stop(true,true);var n=f(d,a,b,i);a.offset(n)})})})(jQuery);