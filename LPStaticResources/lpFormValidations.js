var jsonFormFields,KeyValueFormFields,ConversionURL;function updateUI(){}function pwInit(){try{jsonFormFields=getCookie("FormFields")}catch(err){return}if(null!=jsonFormFields)try{jsonFormFields=$.evalJSON(jsonFormFields.replace(/jsonFormFields=/,""))}catch(err){return}}function ShowLoadingLayer(_text){$("body").prepend('<div id="SaveMask" class="loading-maskPages"><span>'+_text+"</span></div>"),$(".loading-maskPages").height($(document).height())}function HideLoadingLayer(){$("#SaveMask").remove()}function fireLinkClickEvent(_linkObject,e){if(null==clickthroughs_objects[$(_linkObject).attr("id")])return!0;var saveAsConversion=clickthroughs_objects[$(_linkObject).attr("id")].save_as_conversion,linkConversionCode=clickthroughs_objects[$(_linkObject).attr("id")].conversion_code,linkType=clickthroughs_objects[$(_linkObject).attr("id")].type;"telephone"==linkType&&1==saveAsConversion&&""!=linkConversionCode&&e.preventDefault(),$.ajax({url:location.protocol+"//"+document.domain+"/Handler/Clicklog.aspx?PageId="+page_id,type:"POST",async:!1,dataType:"json",data:"mode=clicklog&conversion="+saveAsConversion+"&pagedata="+encodeURIComponent(pwpagedata),success:function(_result){if(1==_result.result&&"telephone"==linkType&&1==saveAsConversion&&""!=linkConversionCode)return ShowLoadingLayer("Please wait ..."),$("body").append(linkConversionCode),setTimeout((function(){return location.href=$(_linkObject).attr("href"),HideLoadingLayer(),!0}),4e3),!1},error:function(errr){return!0}})}function fireClientPixel(){return jsonFormFields?null==ConversionURL?"":""==ConversionURL?"":void $("body").append($(ConversionURL)):""}function replacePlaceHolders(){null!=jsonFormFields&&""!=jsonFormFields&&($("#ElementsArea div.draggable.Htmlembed,#ElementsArea div.draggable.Text,#ElementsArea div.draggable.Headline").each((function(){var text=$(this).html();if(text.indexOf("{=")>-1){for(var i=0;i<jsonFormFields.length;i++)text=text.replace(new RegExp("{="+jsonFormFields[i].key+"}","g"),jsonFormFields[i].value);$(this).html(text)}})),location.hostname.indexOf("pagewiz.net")>-1&&deleteCookie("FormFields"))}function storeBrowserData(){var strBrowserData="";strBrowserData+="pid="+escape(page_id),strBrowserData+="&href="+escape(window.location.href),strBrowserData+="&hostname="+escape(window.location.hostname),strBrowserData+="&referrer="+escape(document.referrer),strBrowserData+="&appCodeName="+escape(navigator.appCodeName),strBrowserData+="&appName="+escape(navigator.appName),strBrowserData+="&appVersion="+escape(navigator.appVersion),strBrowserData+="&cookieEnabled="+escape(navigator.cookieEnabled),strBrowserData+="&language="+escape(navigator.appCodeName),strBrowserData+="&platform="+escape(navigator.platform),strBrowserData+="&userAgent="+escape(navigator.userAgent),strBrowserData+="&screenWidth="+escape(window.screen.width),setCookie("BrowserData",strBrowserData+="&screenHeight="+escape(window.screen.height))}function setCookie(_cookieName,_cookieValue){var current_date=new Date;current_date.setDate(current_date.getDate()+30);var cookie_year=current_date.getFullYear(),cookie_month=current_date.getMonth(),cookie_day=current_date.getDate(),expires=new Date(cookie_year,cookie_month,cookie_day),c_value=escape(_cookieValue)+";domain=;path=/; expires="+expires.toGMTString();document.cookie=_cookieName+"="+c_value}function getCookie(_cookieName){var i,x,y,ARRcookies=document.cookie.split(";");for(i=0;i<ARRcookies.length;i++)if(x=ARRcookies[i].substr(0,ARRcookies[i].indexOf("=")),y=ARRcookies[i].substr(ARRcookies[i].indexOf("=")+1),(x=x.replace(/^\s+|\s+$/g,""))==_cookieName)return unescape(y)}function deleteCookie(_name){document.cookie=_name+"=; path=/; expires=Thu, 01 Jan 1970 00:00:01 GMT;"}function pageSize(){$("body").height()<$(window).height()&&$("html").css("height","100%")}function showAlert(_object,_message){switch(alert_type){case"msgbox":swal({title:"",text:_message,type:"error",timer:5e3});break;case"Tooltip_top":$(_object).tip({content:_message,onHover:!1,position:"top",offset:10});break;case"Tooltip_Bottom":$(_object).tip({content:_message,onHover:!1,position:"bottom",offset:10});break;default:$(_object).tip({content:_message,onHover:!1,position:validation_dir,offset:10})}$(_object).focus()}function validate_form(formID){var validations,validationsArray,elementName;$("input").hideTip(),$("select").hideTip(),$("textarea").hideTip();var validateStatus=!0,browserData="href="+encodeURIComponent(window.location.href)+"&referrer="+encodeURIComponent(document.referrer)+"&userAgent="+encodeURIComponent(navigator.userAgent)+"&screenWidth="+encodeURIComponent(window.screen.width)+"&screenHeight="+encodeURIComponent(window.screen.height),parentID=formID.replace("form_","");return $("#pw9bd"+parentID).val(browserData),$("#"+formID+" [data-validation]").each((function(index){if(validations="",""==(validations=$(this).attr("data-validation")))return!0;validationsArray=validations.split(",");for(var i=0;i<validationsArray.length;i++)switch(validationsArray[i]){case"required":if("checkbox"==$(this).attr("type")||"radio"==$(this).attr("type")){if(elementName=$(this).attr("name"),null==$('input[name="'+elementName+'"]:checked').val())return showAlert($(this).parent(),required_msg),validateStatus=!1,!1;$(this).parent().hideTip()}if(""==$.trim($(this).val()))return $(this).focus(),validateStatus=!1,showAlert($(this),required_msg),!1;$(this).hideTip();break;case"email":if(0==ValidateEmail($.trim($(this).val())))return $(this).focus(),validateStatus=!1,showAlert($(this),email_msg),!1;$(this).hideTip();break;case"url":if(0==is_url($.trim($(this).val())))return $(this).focus(),validateStatus=!1,showAlert($(this),"Please type a valid url"),!1;$(this).hideTip();break;case"number":if(0==isNumber($.trim($(this).val())))return $(this).focus(),validateStatus=!1,showAlert($(this),numeric_msg),!1;$(this).hideTip();break;default:if(validationsArray[i].indexOf("phone")>=0){if(0==is_phone(validationsArray[i],$.trim($(this).val())))return $(this).focus(),validateStatus=!1,showAlert($(this),phone_msg),!1;$(this).hideTip()}}})),0!=validateStatus&&(ShowLoadingLayer("Sending Data ..."),!0)}function ValidateForm(){$("input").hideTip(),$("select").hideTip(),$("textarea").hideTip();var browserData="href="+encodeURIComponent(window.location.href)+"&referrer="+encodeURIComponent(document.referrer)+"&userAgent="+encodeURIComponent(navigator.userAgent)+"&screenWidth="+encodeURIComponent(window.screen.width)+"&screenHeight="+encodeURIComponent(window.screen.height);return $("#pw9bd").val(browserData),validateStatus=!0,$('[data-required*="True"]').each((function(index){if("checkbox"==$(this).attr("type")||"radio"==$(this).attr("type")){if(str_El_name=$(this).attr("name"),null==$('input[name="'+str_El_name+'"]:checked').val())return showAlert($(this).parent(),required_msg),validateStatus=!1,!1;$(this).parent().hideTip()}if(""==$.trim($(this).val()))return $(this).focus(),validateStatus=!1,showAlert($(this),required_msg),!1;$(this).hideTip()})),0!=validateStatus&&($("[data-validation]").each((function(index){switch(ValidationType=$(this).attr("data-validation"),elmValue=$.trim($(this).val()),ValidationType){case"None":break;case"Email":if(0==ValidateEmail(elmValue))return $(this).focus(),validateStatus=!1,showAlert($(this),email_msg),!1;$(this).hideTip();break;case"AlphaNumeic":if(0==isAlphaNumeric(elmValue))return $(this).focus(),validateStatus=!1,showAlert($(this),alphanumeric_msg),!1;$(this).hideTip();break;case"AlphaBetic":if(0==isAlphabetic(elmValue))return $(this).focus(),validateStatus=!1,showAlert($(this),alphabetic_msg),!1;$(this).hideTip();break;case"Numeric":if(1==isNumberonly(elmValue))return $(this).focus(),validateStatus=!1,showAlert($(this),numeric_msg),!1;$(this).hideTip()}})),0!=validateStatus&&(document.frm.submit(),void $("body").prepend('<div id="SaveMask" class="loading-maskPages"><span>Sending Data ...</span></div>')))}function ValidateEmail(_email){return 0==_email.length||0!=/^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,64})$/.test(_email);var reg}function isAlphabetic(_value){return 0==_value.length||0==hasNumbers(_value)}function hasNumbers(_value){var regex;return/\d/g.test(_value)}function isAlphaNumeric(_value){return!!_value.match(/^[a-zA-Z0-9]+$/)}function isNumber(_value){return 0==_value.length||!isNaN(parseFloat(_value))&&isFinite(_value)}function isNumberonly(_value){return 0==_value.length||isNaN(_value)}function is_url(url){var myRegExp;return/^(https?:\/\/)?([\da-z\.-]+)\.([a-z\.]{2,6})([\/\w \.-]*)*\/?$/.test(url)}function is_phone(_range,_value){if(0==_value.length)return!0;var valToCheck=_value.replace(/ /g,"").replace(/\-/g,"").replace(/\./g,"").replace(/\*/g,"").replace(/\+/g,"").replace(/\(/g,"").replace(/\)/g,"").replace(/\#/g,""),arr=_range.split("_"),min="",max="",myRegExp;return min=isNumber(arr[1])?parseInt(arr[1]):5,max=isNumber(arr[2])?parseInt(arr[2]):20,!(0==/^[\u0621-\u064A\u0660-\u0669\0-9 ]+$/.test(valToCheck)||valToCheck.length<min||valToCheck.length>max)}function handle_form_confirmation(_success,_formID){var confirmationObject=JSON.parse($("#"+_formID+" #submission_action").val()),confirmType=Object.keys(confirmationObject)[0];switch($("#SaveMask").remove(),confirmType){case"message_box":$('input[type="text"], input[type="tel"]').val(""),$("textarea").val(""),$("select").prop("selectedIndex",0),swal({title:"",text:confirmationObject[confirmType].message,type:"success",timer:3e3});break;case"redirect_to_url":var redirectTo=confirmationObject[confirmType].url;if(parseInt(pwplanid)>2&&"1"==GetQueryVariable(location.href,"pwpass")&&(redirectTo=ConcatenateFormValuesToURL(redirectTo,_formID)),"_self"==confirmationObject[confirmType].target||null==confirmationObject[confirmType].target||null==confirmationObject[confirmType].target)return void(location.href=redirectTo);var width=confirmationObject[confirmType].width,height=confirmationObject[confirmType].height;$('input[type="text"]').val(""),$("textarea").val(""),$("select").prop("selectedIndex",0),$.fancybox.open({href:redirectTo,width:parseInt(width),height:parseInt(height),type:"iframe",helpers:{overlay:{locked:!1}},padding:5});break;case"redirect_to_file":location.href=confirmationObject[confirmType].url}}function ConcatenateFormValuesToURL(_url,_formID){var newURL=_url;return $("#"+_formID+" .field-container:has(input[type='text'],input[type='hidden'],input[type='tel'],select)").each((function(index){if(null!=$(this).attr("data-fieldid")){var FieldName=encodeURIComponent($(this).find(".field-label").text().replace("*","")),FieldID=$(this).attr("data-fieldid"),FieldValue=encodeURIComponent($("#"+FieldID).val());newURL=ReplaceQueryString(newURL,FieldName,FieldValue)}})),newURL}function handleComfirmation(_success){if(_success)switch($('input[type="text"]').val(""),$("textarea").val(""),$("select").prop("selectedIndex",0),$("#SaveMask").remove(),confirm_type){case"alert":swal({title:"",text:confirm_msg,type:"success",timer:3e3});break;case"webpage":if("_self"==confirm_url_target||""==confirm_url_target)return void(location.href=confirm_url);var deminision=confirm_popup_deminision.split(","),width=deminision[0],height=deminision[1];$.fancybox.open({href:confirm_url,width:parseInt(width),height:parseInt(height),helpers:{overlay:{locked:!1}},type:"iframe",padding:5});break;case"file":location.href=confirm_url}}function getValueFromQuerystring(_query,_key){try{return GetQueryVariable(_query,$.trim(_key))}catch(ex){return 0}}function prePopulateForm(){$(".TopHolder label").each((function(index){var value=getValueFromQuerystring(location.href,$(this).text());0!=value&&$(this).parent().find(".el").not('[type="checkbox"]').not('[type="radio"]').val(decodeURIComponent(value))})),$(".field-container").each((function(index){var value=getValueFromQuerystring(location.href,$(this).find(".field-label").text().replace("*",""));0!=value&&$(this).find("input[type='text'],input[type='hidden'],input[type='tel'],select").val(decodeURIComponent(value))}))}function GetQueryVariable(_query,_name){for(var pairs=(_query=0==_query.indexOf("?")?_query.substr(1):_query.substring(_query.indexOf("?")+1,_query.length)).split("&"),i=0;i<pairs.length;i++){var pair=pairs[i].split("=");if(decodeURIComponent(pair[0].toLowerCase())==_name.toLowerCase())return pair[1]}return 0}function ReplaceQueryString(_url,_param,_value){var preURL="",postURL="",newURL="",iStart_case_1=_url.indexOf("?"+_param+"="),iStart_case_2=_url.indexOf("&"+_param+"=");if(-1==iStart_case_1&&-1==iStart_case_2)preURL=_url,postURL=_url.indexOf("?")>-1?"&"+_param+"="+_value:"?"+_param+"="+_value;else{var iStart;iStart=iStart_case_1>-1?iStart_case_1+1:iStart_case_2+1;var iEnd=_url.indexOf("=",iStart);preURL=_url.substring(0,iEnd)+"="+_value;var iStartRest=_url.indexOf("&",iStart);postURL="",iStartRest>-1&&(postURL=_url.substring(iStartRest))}return newURL=preURL+postURL}function ReplaceUrlDynamicValues(){var urlString=window.location.href,url=new URL(urlString);$.each($("#ElementsArea .draggable.button"),(function(){var btnLink=$(this).find("a").attr("href");if(btnLink&&btnLink.includes("tel:")){var btnLinkVal=btnLink.replace("tel:","");if(btnLinkVal.includes("{url:")){btnLinkVal=(btnLinkVal=btnLinkVal.substring("{url:".length)).substring(0,btnLinkVal.length-1);var qsValue=url.searchParams.get(btnLinkVal);qsValue&&$(this).find("a").attr("href","tel:"+qsValue)}}}))}function MakeFirstSectionSticky(){if(f_top_section_sticky){var firstSection=$(".section").first();if(0!=firstSection.length){var elemsToStick=[],sectionTopPosit=$(firstSection).offset().top,sectionOriginalHeight=$(firstSection).height(),sectionOriginalWidth=$(firstSection).width(),duplicatedSection=$(firstSection).clone();$(duplicatedSection).removeClass("section"),$(duplicatedSection).addClass("section-fixed fixed-top"),$(duplicatedSection).find(".section-centered").remove();var topMostElementZindex=0;$.each($("#ElementsArea .draggable"),(function(index,element){if("absolute"==$(element).css("position")){var elementTopPosit=$(element).offset().top;elementTopPosit>=sectionTopPosit&&elementTopPosit+$(element).height()<=sectionTopPosit+sectionOriginalHeight&&(element=$(element).css("top",elementTopPosit-sectionTopPosit),elemsToStick.push(element));var elmZindex=$(element).css("z-index");if(!elmZindex)return;parseInt(elmZindex)>topMostElementZindex&&(topMostElementZindex=parseInt(elmZindex))}})),topMostElementZindex+=10;var elementsAreaWidth=2*parseInt($("#ElementsArea").css("margin-left").replace("px","").replace("-",""));duplicatedSection=$(firstSection).hasClass("full-width")?$(duplicatedSection).css({left:"0px"}):$(duplicatedSection).css({left:"50%","margin-left":elementsAreaWidth/2*-1+"px"}),$(duplicatedSection).css({position:"fixed",top:"0px","z-index":topMostElementZindex,display:"flex","flex-direction":"row","flex-wrap":"wrap","justify-content":"center"});var nextSection=$(firstSection).next(".section");f_bottom_section_sticky&&f_top_section_sticky&&$(".section,.section-fixed").length<=2?$(firstSection).remove():nextSection&&0!==nextSection.length&&($(nextSection).eq(0).css("padding-top",sectionOriginalHeight+"px"),$(nextSection).eq(0).attr("sticky-compensation-top",sectionOriginalHeight),$(nextSection).eq(0).addClass("fixed-top-padding"),$(firstSection).remove());var stickyElmContainer=$("<div/>",{id:"StickyHeader",style:"width:"+elementsAreaWidth+"px;position:relative;"});$.each(elemsToStick,(function(i,element){$(stickyElmContainer).append(element)})),$(duplicatedSection).append(stickyElmContainer),$("body").prepend(duplicatedSection)}}}function MakeLastSectionSticky(){if(f_bottom_section_sticky){var lastSection=$(".section").last();if(0!=lastSection.length){var elemsToStick=[],sectionsHeightSum=0,sectionOriginalHeight=$(lastSection).height(),sectionOriginalWidth=$(lastSection).width(),duplicatedSection=$(lastSection).clone();$(duplicatedSection).removeClass("section"),$(duplicatedSection).addClass("section-fixed fixed-bottom"),$(duplicatedSection).find(".section-centered").remove();var topMostElementZindex=0;$.each($(".section,.section-fixed"),(function(i,section){i!=$(".section,.section-fixed").length-1&&(sectionsHeightSum+=$(section).height())})),$.each($("#ElementsArea .draggable"),(function(i,element){if("absolute"==$(element).css("position")){var elementTop;$(element).offset().top>=sectionsHeightSum&&elemsToStick.push(element);var elmZindex=$(element).css("z-index");if(!elmZindex)return;parseInt(elmZindex)>topMostElementZindex&&(topMostElementZindex=parseInt(elmZindex))}})),topMostElementZindex+=10;var elementsAreaWidth=2*parseInt($("#ElementsArea").css("margin-left").replace("px","").replace("-",""));duplicatedSection=$(lastSection).hasClass("full-width")?$(duplicatedSection).css({left:"0px"}):$(duplicatedSection).css({left:"50%","margin-left":elementsAreaWidth/2*-1+"px"}),$(duplicatedSection).css({position:"fixed",bottom:"0px","z-index":topMostElementZindex,display:"flex","flex-direction":"row","flex-wrap":"wrap","justify-content":"center"});var prevSection=$(lastSection).prev(".section");f_bottom_section_sticky&&f_top_section_sticky&&$(".section,.section-fixed").length<=2?$(lastSection).remove():prevSection&&0!==prevSection.length&&($(prevSection).eq(0).css("padding-bottom",sectionOriginalHeight+"px"),$(prevSection).eq(0).attr("sticky-compensation-bottom",sectionOriginalHeight),$(prevSection).eq(0).addClass("fixed-bottom-padding"),$(lastSection).remove());var stickyElmContainer=$("<div/>",{id:"StickyFooter",style:"width:"+elementsAreaWidth+"px;position:relative;"});$.each(elemsToStick,(function(i,element){element=$(element).css("top",$(element).offset().top-sectionsHeightSum),$(stickyElmContainer).append(element)})),$(duplicatedSection).append(stickyElmContainer),$("body").prepend(duplicatedSection)}}}function InitializeAutoScaleFeature(){f_autoscale&&$.each($(".section"),(function(i,item){$(item).data("height",$(item).height())}))}function AutoScaleLpage(){if(f_autoscale){var windowWidth=document.documentElement.clientWidth,viewportContent=document.head.querySelector("[name=viewport]").content,pageWidth=parseInt(viewportContent.substring(viewportContent.lastIndexOf("width=")+6,viewportContent.lastIndexOf(",")));if(windowWidth>=pageWidth)ResetAutoScaleChanges(pageWidth);else{var transformRatio=windowWidth/pageWidth;$.each($(".section"),(function(i,item){var originalHeight=$(item).data("height");$(item).css("width",windowWidth+"px"),$(item).css("height",originalHeight*transformRatio)}));var originalMarginFix=pageWidth/2;$("#ElementsArea").css("transform","scale("+transformRatio+")"),$("#ElementsArea").css("margin-left",originalMarginFix*transformRatio*-1),$(".fixed-top").css("transform-origin","top left"),$(".fixed-bottom").css("transform-origin","bottom left"),$(".fixed-top,.fixed-bottom").css("width",pageWidth+"px"),$(".fixed-top,.fixed-bottom").css("transform","scale("+transformRatio+")"),$(".fixed-top,.fixed-bottom").css("margin-left",originalMarginFix*transformRatio*-1),$(".section-fixed.full-width").css("left","50%"),$(".fixed-top-padding").css("padding-top",$($(".fixed-top-padding")).attr("sticky-compensation-top")*transformRatio),$(".fixed-bottom-padding").css("padding-bottom",$($(".fixed-bottom-padding")).attr("sticky-compensation-bottom")*transformRatio)}}}function ResetAutoScaleChanges(_pageWidth){$.each($(".section"),(function(i,item){$(item).css("width",""),$(item).css("height","")})),$("#ElementsArea").css("transform",""),$("#ElementsArea").css("margin-left",""),$(".section-fixed").css("width",""),$(".section-fixed").css("transform-origin",""),$(".section-fixed").css("transform",""),$(".section-fixed").css("margin-left",_pageWidth/2*-1),$(".section-fixed.full-width").css("left","0px"),$(".section-fixed.full-width").css("margin-left",""),$(".fixed-top-padding").css("padding-top",parseInt($($(".fixed-top-padding")).attr("sticky-compensation-top"))),$(".fixed-bottom-padding").css("padding-bottom",parseInt($($(".fixed-bottom-padding")).attr("sticky-compensation-bottom")))}confirm_url_target="",$(document).ready((function(){pwInit(),pageSize(),$(window).resize((function(){pageSize(),AutoScaleLpage()})),replacePlaceHolders(),prePopulateForm(),storeBrowserData(),$(".button").css("cursor","pointer"),$(".button").click((function(e){$(this).children("span.elButton").length>0&&ValidateForm()})),$("a[data-rel*='_popup']").click((function(e){if(fireLinkClickEvent($(this),e),null!=clickthroughs_objects[$(this).attr("id")]){var deminision=clickthroughs_objects[$(this).attr("id")].deminision.split(","),width=deminision[0],height=deminision[1];return $.fancybox.open({href:$(this).attr("href"),width:parseInt(width),height:parseInt(height),type:"iframe",helpers:{overlay:{locked:!1}},padding:5}),!1}})),$("a").live("click",(function(e){fireLinkClickEvent($(this),e)})),fireClientPixel(),"placeholder"in document.createElement("input")||($("input[placeholder], textarea[placeholder]").each((function(){var val=$(this).attr("placeholder");""==this.value&&(this.value=val),$(this).focus((function(){this.value==val&&(this.value="")})).blur((function(){""==$.trim(this.value)&&(this.value=val)}))})),$("form").submit((function(){$(this).find("input[placeholder], textarea[placeholder]").each((function(){this.value==$(this).attr("placeholder")&&(this.value="")}))}))),InitializeAutoScaleFeature(),ReplaceUrlDynamicValues(),MakeFirstSectionSticky(),MakeLastSectionSticky(),AutoScaleLpage()}));